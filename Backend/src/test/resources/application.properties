spring.application.name=e-commerce

# In-memory database for tests
spring.datasource.url=jdbc:h2:mem:ecommerce;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DATABASE_TO_LOWER=TRUE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

logging.level.org.springframework.security=INFO

management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.endpoint.prometheus.enabled=true
management.metrics.enable.all=true
management.server.base-path=/actuator

server.address=0.0.0.0
server.port=0

# API version
server.servlet.context-path=/api/v1

# JWT (>=256-bit key for HS256)
jwt.access-token.secret=test-secret-key-should-be-at-least-32-bytes-long
jwt.access-token.expiration=604800000
jwt.refresh-token.expiration=604800000

# Time token
token.email-verification.expiration-minutes=5
token.refresh.expiration-days=7

# Cloudinary (mocked in tests; values kept dummy)
cloudinary.cloud_name=test
cloudinary.api_key=test
cloudinary.api_secret=test
cloudinary.folder=test

spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# VNPay dummy settings
vnpay.tmnCode=test
vnpay.secretKey=test
vnpay.url=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
vnpay.returnUrl=http://127.0.0.1:5500/result.html
vnpay.version=2.1.0
vnpay.command=pay
vnpay.currCode=VND
vnpay.orderType=other

# Email dummy settings
spring.mail.host=localhost
spring.mail.port=1025
spring.mail.username=test
spring.mail.password=test
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false

#Redis
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.database=0
spring.data.redis.timeout=3000ms

# Disable Redis repositories for tests to avoid needing a real connection
spring.data.redis.repositories.enabled=false

spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=4
spring.data.redis.lettuce.pool.min-idle=1

#Redis key
spring.redis.key-prefix=ecommerce

#Otp
spring.otp.expiration-minutes=5
spring.otp.length=6
spring.otp.max-attempts=5
spring.otp.attempt-expiry-minutes=15

#Ratelimit
ratelimit.otp.per-minute=5
ratelimit.otp.per-hour=20

#Login attempt
login.max-attempts=5
login.attempt-expiry-minutes=10
login.lock-duration-minutes=5